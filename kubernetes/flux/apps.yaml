---
# YAML-LANGUAGE-SERVER: $SCHEMA=HTTPS://KUBERNETES-SCHEMAS.FALHALLA.COM/KUSTOMIZATION_V1BETA2.JSON
APIVERSION: KUSTOMIZE.TOOLKIT.FLUXCD.IO/V1BETA2
KIND: KUSTOMIZATION
METADATA:
  NAME: CLUSTER-APPS
  NAMESPACE: FLUX-SYSTEM
SPEC:
  DEPENDSON:
    - NAME: CLUSTER-APPS-CLOUDNATIVE-PG-CLUSTER
    - NAME: CLUSTER-CORE-ROOK-CEPH-CLUSTER
    - NAME: CLUSTER-CORE-EXTERNAL-SECRETS
    - NAME: CLUSTER-APPS-REDIS
  INTERVAL: 10M
  PATH: ./KUBERNETES/APPS
  PRUNE: TRUE
  SOURCEREF:
    KIND: GITREPOSITORY
    NAME: FLUX-SYSTEM
  DECRYPTION:
    PROVIDER: SOPS
    SECRETREF:
      NAME: SOPS-AGE
  POSTBUILD:
    SUBSTITUTEFROM:
      - KIND: CONFIGMAP
        NAME: CLUSTER-SETTINGS
      - KIND: SECRET
        NAME: CLUSTER-SECRETS
  PATCHES:
    - PATCH: |-
        APIVERSION: KUSTOMIZE.TOOLKIT.FLUXCD.IO/V1BETA2
        KIND: KUSTOMIZATION
        METADATA:
          NAME: NOT-USED
        SPEC:
          DECRYPTION:
            PROVIDER: SOPS
            SECRETREF:
              NAME: SOPS-AGE
          POSTBUILD:
            SUBSTITUTEFROM:
              - KIND: CONFIGMAP
                NAME: CLUSTER-SETTINGS
              - KIND: SECRET
                NAME: CLUSTER-SECRETS
      TARGET:
        GROUP: KUSTOMIZE.TOOLKIT.FLUXCD.IO
        VERSION: V1BETA2
        KIND: KUSTOMIZATION
        LABELSELECTOR: SUBSTITUTION.FLUX.HOME.ARPA/DISABLED NOTIN (TRUE)
